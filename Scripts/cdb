#!/usr/bin/env zsh

# Description: Like "cd .." but on steroids. If argument is supplied then
# current directory is changed to closest directory matching pattern.
#
# Example:
#
#   /Users/GLEG/Development/Python $ cdb Us
#   /Users $
#
# ~/.zshrc:
#
#   alias cdb="source cdb"
#
# Usage: cdb
#        cdb <pattern>
#
# Original script: https://github.com/vigneshwaranr/bd/blob/master/bd
# Modified by: GÃ¶ran Gustafsson (gustafsson.g at gmail.com)

if [[ $# -eq 1 ]]; then
  dir=$(echo $PWD | sed 's|\(.*/'${1}'[^/]*/\).*|\1|')

  if [[ $dir != $PWD ]]; then
    cd "$dir"
  else
    echo "No match found!"
    return
  fi
elif [[ $# -eq 0 ]]; then
  cd ..
else
  echo "Usage: ${0:t} [PATTERN]..."
fi
