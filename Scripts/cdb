#!/usr/bin/env zsh

# Description: Like "cd .." but on steroids. If argument is supplied then
# current directory is changed to closest directory matching pattern.
#
# Example:
#
#   /Users/GLEG/Development/Python $ cdb Us
#   /Users $
#
# ~/.zshrc:
#
#   alias cdb="source cdb"
#
# Usage: cdb
#        cdb <pattern>
#
# Original script created by Vigneshwaran Raveendran:
#   <https://github.com/vigneshwaranr/bd/blob/master/bd>
# Modified by GÃ¶ran Gustafsson (gustafsson.g at gmail.com).

if [[ $# -eq 1 ]]; then
  new_pwd=$(echo $PWD | sed 's|\(.*/'${1}'[^/]*/\).*|\1|')

  if [[ $new_pwd != $PWD ]]; then
    cd "$new_pwd"
  else
    echo "No match found!"
  fi
elif [[ $# -eq 0 ]]; then
  cd ..
else
  echo "Usage: ${0:t} [PATTERN]..."
fi
