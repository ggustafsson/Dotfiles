#!/usr/bin/env zsh

# Description: Start custom Tmux development setup.
#
# Usage: tmux-dev
#
# Author: GÃ¶ran Gustafsson (gustafsson.g at gmail.com)
# License: BSD 3-Clause

if [[ $HOST == Twoson ]]; then
  dir=~/Bitbucket
  cmd_fd='$(fd --type directory --max-depth 2 --strip-cwd-prefix | fzf --tac)'
else
  dir=~/Projects
  cmd_fd='$(fd --type directory --max-depth 1 --strip-cwd-prefix | fzf --tac)'
fi

cmd_cd="cd ${dir}/$cmd_fd"
cmd_tmux="tmux split-window -v -l 25% \; select-pane -t :.+"

tmux \
  new-window -c $dir "${cmd_cd}; ${cmd_tmux}; nvim" \; \
  rename-window dev
