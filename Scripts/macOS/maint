#!/usr/bin/env zsh

# Description: Executes a bunch of maintenance commands I run regularly.
#
# Usage: maint
#
# Creator: GÃ¶ran Gustafsson (gustafsson.g at gmail.com)
# License: BSD 3-Clause

# TODO: Remove Coruscant after legacy decom.
if [[ $HOST == (Onett|Coruscant) ]]; then
  choices=(1 "maint-ansible" on 2 "rmhogs" on 3 "backup" on 4 "backup2srv" off)
else
  choices=(1 "maint-ansible" on 2 "rmhogs" on)
fi

echo $choices
selections=$(dialog \
  --default-button "Cancel" \
  --checklist "Select maintenance commands:" 0 40 0 \
  $choices 2>&1 > /dev/tty)

clear

for selection in ${(z)selections}; do
  case $selection in
    1)
      echo
      maint-ansible
      ;;
    2)
      echo
      rmhogs
      ;;
    3)
      echo
      backup --yes
      ;;
    4)
      echo
      backup2srv
      ;;
  esac
done
